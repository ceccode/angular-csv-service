angular.module("fCsv",[]).factory("fCsv",function(){var n=function(n,r,t){if(n){r=r||",",t=t||!0;var e=[],f=[],l=0,i=n.split("\n"),s=i[0].split(r).length;t&&(f=i[0].split(r),l=1);for(var a=l;a<i.length;a++){var o={},g=i[a].split(new RegExp(r+'(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)'));if(g.length===s){if(t)for(var v=0;v<f.length;v++)o[f[v]]=g[v];else for(var u=0;u<g.length;u++)o[u]=g[u];e.push(o)}}return JSON.stringify(e)}};return{toJson:n}});