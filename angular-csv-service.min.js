angular.module("fCsv",[]).factory("fCsv",function(){var r=function(r,n,e){if(r){n=n||",",e=e||!0;var f=[],i=[],a=0,o=r.split("\n"),t=o[0].split(n).length;e&&(i=o[0].split(n),a=1);for(var l=a;l<o.length;l++){var s={},v=o[l].split(new RegExp(n+'(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)'));if(v.length===t){if(e)for(var g=0;g<i.length;g++)s[i[g]]=v[g];else for(var c=0;c<v.length;c++)s[c]=v[c];f.push(s)}}return JSON.stringify(f)}},n=function(r,n,e){if(r){n=n||!1,e=e||!1;var f="object"!=typeof r?JSON.parse(r):r,i="",a="";if(n){f[0];if(e)for(var o in f[0]){var t=o+"";i+='"'+t.replace(/"/g,'""')+'",'}else for(var o in f[0])i+=o+",";i=i.slice(0,-1),a+=i+"\r\n"}for(var l=0;l<f.length;l++){var i="";if(e)for(var o in f[l]){var t=f[l][o]+"";i+='"'+t.replace(/"/g,'""')+'",'}else for(var o in f[l])i+=f[l][o]+",";i=i.slice(0,-1),a+=i+"\r\n"}return a}};return{toJson:r,csvToJson:r,jsonToCsv:n}});